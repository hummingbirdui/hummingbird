---
const pathName = Astro.originPathname;
const breadcrumbs = pathName
  .split('/')
  .filter((item) => item !== '')
  .slice(1);

const formatText = (text: string) => {
  const withoutDash = text.split('-').join(' ');
  const uppercaseLatter = withoutDash[0].toUpperCase();
  return uppercaseLatter.concat(withoutDash.slice(1));
};
---

<nav
  class="navbar sticky top-[calc(var(--navbar-height)-1px)] bg-default z-10 border-b border-light px-6 sm:px-10 lg:hidden"
>
  <div class="flex items-center mx-auto w-full max-w-8xl">
    <button
      class="btn btn-circle btn-subtle-neutral shrink-0"
      data-bs-toggle="offcanvas"
      data-bs-target="#sidebarOffcanvas"
      aria-controls="sidebarOffcanvas"
    >
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
        ><path
          fill="currentColor"
          d="M4 18q-.425 0-.712-.288T3 17t.288-.712T4 16h11q.425 0 .713.288T16 17t-.288.713T15 18zm14.9-1.7l-3.6-3.6q-.3-.3-.3-.7t.3-.7l3.6-3.6q.275-.275.7-.275t.7.275t.275.7t-.275.7L17.4 12l2.9 2.9q.275.275.275.7t-.275.7t-.7.275t-.7-.275M4 13q-.425 0-.712-.288T3 12t.288-.712T4 11h8q.425 0 .713.288T13 12t-.288.713T12 13zm0-5q-.425 0-.712-.288T3 7t.288-.712T4 6h11q.425 0 .713.288T16 7t-.288.713T15 8z"
        ></path></svg
      >
    </button>
    <nav aria-label="breadcrumb" class="ms-6 w-4/5">
      <ol class="breadcrumb breadcrumb-separator-arrow flex-nowrap">
        {
          breadcrumbs.map((item, index) => (
            <li class={`breadcrumb-item inline-block font-medium ${breadcrumbs.length > 2 ? 'truncate max-w-1/3' : ''} ${index !== breadcrumbs.length - 1 ? 'text-muted' : ''}`}>
              {formatText(item)}
            </li>
          ))
        }
      </ol>
    </nav>
  </div>
</nav>
